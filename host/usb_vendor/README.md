# USB Vendor Stream Demo

Минимальный пример приёма потоковых кадров с нового USB устройства через **libusb**.

## Возможности
- Асинхронные bulk IN (8 конвейерных трансферов по 2048 байт)
- Команды: профиль, режим FULL/ROI, старт/стоп
- Парсинг заголовка `VendorHdr` (32 байта)
- CRC16 CCITT-FALSE (если установлен бит 2 во flags)
- Раздельные кольцевые буферы для ADC0 / ADC1
- Печать статистики 1 раз в секунду: fps, bytes, crc_bad, magic_bad, глубина очередей

## Сборка
```bash
sudo apt-get install -y libusb-1.0-0-dev
cd usb_vendor
make
```

## Запуск
```bash
./usb_stream_demo
```
Для остановки: Ctrl+C.

## Настройка VID/PID
Измените `VID` / `PID` в `main.c`, если устройство поменяло идентификаторы.

## Дальнейшие шаги
- Добавить отправку `CMD_GET_STATUS (0x30)` каждые N мс и парсинг 64-байт ответа
- Реализовать сопоставление парных seq (ADC0 vs ADC1) для строгой синхронизации
- Экспорт кадров в ringbuffer для Python (через shared memory / socket)
- Интегрировать с существующим PyQtGraph GUI
