# ‚ö° –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç BMI30 Oscilloscope

## üéØ –°—É—Ç—å –ü—Ä–æ–µ–∫—Ç–∞
–ü–æ–ª—É—á–∏—Ç—å –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∂–∏–≤—É—é –æ—Å—Ü–∏–ª–ª–æ–≥—Ä–∞–º–º—É ADC –ø–æ—Ç–æ–∫–∞ –æ—Ç BMI30 —á–µ—Ä–µ–∑ USB Vendor Bulk —Å ~200 FPS.

---

## ‚úÖ –¢–µ–∫—É—â–µ–µ –°–æ—Å—Ç–æ—è–Ω–∏–µ

**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ BMI30**: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –î–í–ê —Ä–µ–∂–∏–º–∞
- **–†–µ–∂–∏–º 1: Vendor Bulk (IF#2)** ‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
  - Interface 2 (class 255)
  - Endpoints: OUT 0x03, IN 0x83  
  - STAT v1 –ø—Ä–æ—Ç–æ–∫–æ–ª
  - ~200 FPS –¥–ª—è –æ—Å—Ü–∏–ª–ª–æ–≥—Ä–∞–º–º—ã
  - –°—Ç–∞—Ç—É—Å: READY FOR PRODUCTION
  
- **–†–µ–∂–∏–º 2: CDC (IF#0 + IF#1)** (legacy fallback)
  - Interface 0 (CDC Control) + Interface 1 (CDC Data)
  - –î–ª—è –æ—Ç–ª–∞–¥–∫–∏, –º–µ–¥–ª–µ–Ω–Ω–µ–µ
  - –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: **‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ**

**–ö–æ–º–ø—å—é—Ç–µ—Ä (RPi)**: ‚úÖ **–ì–û–¢–û–í**
- Python –æ–∫—Ä—É–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≥–æ—Ç–æ–≤—ã (PyUSB, PyQt5, numpy)
- GUI –∫–æ–¥ –≥–æ—Ç–æ–≤ (BMI30.200.py) - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Vendor Bulk
- USB —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –≥–æ—Ç–æ–≤ (usb_vendor/usb_stream.py)

---

## üöÄ –ß—Ç–æ –ù—É–∂–Ω–æ –°–¥–µ–ª–∞—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ï—Å–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ —Ä–µ–∂–∏–º–µ Vendor Bulk (IF#2) ‚≠ê –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø
```bash
cd /home/techaid/Documents
python3 BMI30.200.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- GUI –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å –¥–≤—É–º—è –ø—É—Å—Ç—ã–º–∏ –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã
- –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —Å IF#2 –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –¥–≤–µ –æ—Å—Ü–∏–ª–ª–æ–≥—Ä–∞–º–º—ã
- ~200 FPS –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç B: –ï—Å–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ —Ä–µ–∂–∏–º–µ CDC (IF#0 + IF#1) (legacy fallback)
```bash
cd /home/techaid/Documents
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π USB_receiver (–º–µ–¥–ª–µ–Ω–Ω–µ–µ, –±–µ–∑ GUI –æ—Å—Ü–∏–ª–ª–æ–≥—Ä–∞—Ñ–∞)
python3 USB_receiver.py --plot-fast
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- –û–∫–Ω–æ PyQtGraph —Å –º–µ–Ω—å—à–µ–π —á–∞—Å—Ç–æ—Ç–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –î–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—É–ø–∞—é—Ç —á–µ—Ä–µ–∑ CDC –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ä—Ç

### –ö–∞–∫ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ö–∞–∫–æ–π –†–µ–∂–∏–º –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–∏–¥–∏—Ç –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
lsusb -d cafe:4001 -v | grep "bNumInterfaces\|Interface"

# –ò—â–∏—Ç–µ:
# bNumInterfaces 3 ‚Üí Vendor Bulk —Ä–µ–∂–∏–º ‚úÖ (–í–∞—Ä–∏–∞–Ω—Ç –ê)
# bNumInterfaces 2 ‚Üí CDC —Ä–µ–∂–∏–º (–í–∞—Ä–∏–∞–Ω—Ç B)
```

---

## üìä –ü–æ—Å–ª–µ –ó–∞–ø—É—Å–∫–∞ GUI

### –ï—Å–ª–∏ –í—Å—ë –†–∞–±–æ—Ç–∞–µ—Ç ‚úÖ (Vendor Bulk —Ä–µ–∂–∏–º)
- –ù–∞ —ç–∫—Ä–∞–Ω–µ –¥–≤–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Å—Ü–∏–ª–ª–æ–≥—Ä–∞–º–º—ã (ADC0 –∑–µ–ª—ë–Ω—ã–π, ADC1 —Å–∏–Ω–∏–π)
- –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è ~200 FPS
- –°—Ç–∞—Ç—É—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "BUF=1360 FREQ=200Hz"
- X-–æ—Å—å: –∏–Ω–¥–µ–∫—Å—ã —Å–µ–º–ø–ª–æ–≤
- Y-–æ—Å—å: –∞–º–ø–ª–∏—Ç—É–¥–∞ (-32768..32767)

### –ï—Å–ª–∏ –ù–µ—Ç –î–∞–Ω–Ω—ã—Ö ‚ùå
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞–∫–æ–π —Ä–µ–∂–∏–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: `lsusb -d cafe:4001 -v | grep bNumInterfaces`
- –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ü©∫ (–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞) –≤ GUI
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞: –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ —Ä–µ–∂–∏–º–µ CDC (bNumInterfaces=2)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `python3 USB_receiver.py --plot-fast` –≤–º–µ—Å—Ç–æ `BMI30.200.py`
- –ò–õ–ò –ø–æ—Ç—Ä–µ–±—É–π—Ç–µ –æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø–µ—Ä–µ–ø—Ä–æ—à–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ Vendor Bulk —Ä–µ–∂–∏–º

---

## ü©∫ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
```bash
lsusb | grep cafe:4001
# Output: Bus 001 Device XXX: ID cafe:4001 WeAct BMI30 Streamer
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É USB
```bash
lsusb -d cafe:4001 -v | head -50
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: Interface 2, EP 0x03, EP 0x83
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Python –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
python3 -c "import usb, pyqtgraph, PyQt5; print('‚úì All dependencies OK')"
```

### –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å USB –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –ù–∞–ø—Ä—è–º—É—é
```bash
python3 << 'EOF'
from usb_vendor.usb_stream import USBStream

try:
    stream = USBStream(profile=1, full=True)
    print("‚úì Device opened successfully")
    
    for i in range(5):
        pairs = stream.get_stereo(timeout=0.1)
        if pairs:
            print(f"‚úì Pair {i}: {len(pairs)} frames received")
    
    stream.close()
    print("‚úì USB transport working!")
except Exception as e:
    print(f"‚úó Error: {e}")
EOF
```

---

## üÜò –ï—Å–ª–∏ –ù–µ –†–∞–±–æ—Ç–∞–µ—Ç

### –û—à–∏–±–∫–∞: "Device not found"
```
–†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ USB –∫–∞–±–µ–ª—è
lsusb | grep cafe:4001
```

### –û—à–∏–±–∫–∞: "No suitable interface"
```
–†–µ—à–µ–Ω–∏–µ: –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞. 
–°–æ–∑–¥–∞—Ç—å GitHub Issue —Å —Ç–µ–∫—Å—Ç–æ–º –æ—à–∏–±–∫–∏.
```

### –û—à–∏–±–∫–∞: "Permission denied"
```bash
# –î–∞—Ç—å –ø—Ä–∞–≤–∞
sudo tee /etc/udev/rules.d/99-bmi30.rules << 'EOF'
SUBSYSTEMS=="usb", ATTRS{idVendor}=="cafe", ATTRS{idProduct}=="4001", MODE="0666"
EOF

sudo udevadm control --reload-rules
sudo udevadm trigger
```

### –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ
1. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É ü©∫ (Diagnose) –≤ GUI
2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å
3. –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç alt=1/out_armed - —Å–æ–∑–¥–∞—Ç—å Issue

---

## üìù –ö–∞–∫ –°–æ–∑–¥–∞—Ç—å GitHub Issue

–ï—Å–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://github.com/kslabs/bmi30-rpi/issues
2. –ù–∞–∂–º–∏—Ç–µ "New Issue"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:

```
**–ù–∞–∑–≤–∞–Ω–∏–µ**: [Device Problem] Brief description

**–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**:
- –ß—Ç–æ –≤—ã –¥–µ–ª–∞–ª–∏
- –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ
- –ß—Ç–æ –≤—ã –æ–∂–∏–¥–∞–ª–∏

**–í—ã–≤–æ–¥ –∫–æ–Ω—Å–æ–ª–∏**:
[–í—Å—Ç–∞–≤–∏—Ç—å –≤–µ—Å—å —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏]

**–ö–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏**:
lsusb -d cafe:4001 -v output
[–í—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥]

**–û–∫—Ä—É–∂–µ–Ω–∏–µ**:
- Python –≤–µ—Ä—Å–∏—è: 3.11
- –û–°: Linux (RPi OS)
```

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —É–≤–∏–¥–∏—Ç Issue –∏:
- –ò–∑–º–µ–Ω–∏—Ç –ø—Ä–æ—à–∏–≤–∫—É –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
- –ü–µ—Ä–µ–ø—Ä–æ—à–∏—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
- –û–±–Ω–æ–≤–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

---

## üìö –û—Å–Ω–æ–≤–Ω—ã–µ –§–∞–π–ª—ã

- `BMI30.200.py` ‚Äî GUI (1113 —Å—Ç—Ä–æ–∫)
- `usb_vendor/usb_stream.py` ‚Äî USB —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç (~850 —Å—Ç—Ä–æ–∫)
- `LAUNCH.md` ‚Äî –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- `README_INSTRUCTIONS.md` ‚Äî –ù–∞–≤–∏–≥–∞—Ü–∏—è

---

## ‚ú® –ì–ª–∞–≤–Ω–æ–µ

**–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏**:
```bash
python3 BMI30.200.py
```

**–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**:
1. –ü–æ—Å–º–æ—Ç—Ä–∏ –æ—à–∏–±–∫—É –≤ –∫–æ–Ω—Å–æ–ª–∏
2. –°–æ–∑–¥–∞–π GitHub Issue —Å –æ—à–∏–±–∫–æ–π
3. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç

**–£—Å–ø–µ—Ö–∞!** üöÄ
