import pigpio
import time

# ?????????????
pi = pigpio.pi()

# ???? GPIO ??? PWM
PWM_GPIO_0 = 18  # GPIO 18 (pwm_channel_0)
PWM_GPIO_1 = 19  # GPIO 19 (pwm_channel_1)

# ?????????
frequency = 200  # ??????? PWM, ??
duty_cycle = 128  # ?????? (?? 255) ??? 50%
pulse_count = 10  # ?????????? ????????? ?? ?????? ??????
interval = 50e-6  # ???????? ????? ?????????? ? ???????? (50 ???????????)

# ????????? ???????
pi.set_PWM_frequency(PWM_GPIO_0, frequency)
pi.set_PWM_frequency(PWM_GPIO_1, frequency)

try:
    while True:
        # ????????? ????????? ? ???????? ???????????
        for _ in range(pulse_count):
            pi.set_PWM_dutycycle(PWM_GPIO_0, duty_cycle)  # ???????? PWM
            pi.set_PWM_dutycycle(PWM_GPIO_1, duty_cycle)  # ???????? PWM
            time.sleep(interval)  # ????? ?????????
            pi.set_PWM_dutycycle(PWM_GPIO_0, 0)  # ????????? PWM
            pi.set_PWM_dutycycle(PWM_GPIO_1, 0)  # ????????? PWM
            time.sleep(interval)  # ????? ??????????

        # ???? ??????????, ?????? ???????? ??????? ??? ?????? ????????? ?????
        print("???????? ? ???????? ??????? ? ???????? ?????????????")

except KeyboardInterrupt:
    pass

finally:
    # ????????? PWM ? ???????
    pi.set_PWM_dutycycle(PWM_GPIO_0, 0)  # ?????????? PWM
    pi.set_PWM_dutycycle(PWM_GPIO_1, 0)  # ?????????? PWM
    pi.stop()  # ?????????? pigpio
